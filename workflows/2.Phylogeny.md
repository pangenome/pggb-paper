# Phylogeny

## All species

Variables:

```bash
RUN_ODGI=/home/guarracino/tools/odgi/bin/odgi-19cea997e29ea590c1ccd75c1d039b2b1ed44f74
DIR_GRAPHS=/lizardfs/guarracino/pggb-paper/graphs
DIR_PHYLOGENY=/lizardfs/guarracino/pggb-paper/phylogeny
PATH_PANGENOMES_TSV=/lizardfs/guarracino/pggb-paper/data/pangenomes.tsv
THREADS=48
```

Run `odgi paths`:

```bash
mkdir -p $DIR_PHYLOGENY
cd $DIR_PHYLOGENY

sed '1d' $PATH_PANGENOMES_TSV | grep 142 | while read f p s n k G POA O REF; do
  seq 3 | while read c; do
    echo $f $p $s $n $k $G $POA $O $REF $c;

    out=$(basename "$f" .fa.gz)_p$p.s$s.n$n.k$k.G$(echo $G | tr ',' '-').P$POA.O$(echo $O | sed 's/\.//g')_$c
    PATH_OG=$DIR_GRAPHS/$out/*.final.og
    PATH_OG=$(eval echo $PATH_OG) # force '*' expansion
    PREFIX=$(basename "eval $PATH_OG" .og)
    sbatch -c $THREADS -p workers -J $(basename "$f" .fa.gz) --wrap "hostname; $RUN_ODGI paths -i $PATH_OG -t $THREADS -d -D '#' > $DIR_PHYLOGENY/$PREFIX.$c.dist.tsv;"
  done
done
```

Make phylogenetic trees:

```bash
# To finish
```
